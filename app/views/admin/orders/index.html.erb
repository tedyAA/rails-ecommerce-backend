<div class="orders-container" style="max-width: 1000px; margin: 40px auto; padding: 20px;">
  <h1 style="font-size: 2rem; font-weight: 700; margin-bottom: 20px; text-align: center; color: #333;">
    ðŸ“¦ All Orders
  </h1>

  <table style="width: 100%; border-collapse: collapse; background: #fff; box-shadow: 0 2px 8px rgba(0,0,0,0.1); border-radius: 8px; overflow: hidden;">
    <thead style="background-color: #f8f9fa;">
      <tr style="text-align: left; font-size: 0.95rem; color: #555;">
        <th style="padding: 12px 16px; border-bottom: 2px solid #e0e0e0;">ID</th>
        <th style="padding: 12px 16px; border-bottom: 2px solid #e0e0e0;">User</th>
        <th style="padding: 12px 16px; border-bottom: 2px solid #e0e0e0;">Total</th>
        <th style="padding: 12px 16px; border-bottom: 2px solid #e0e0e0;">Status</th>
        <th style="padding: 12px 16px; border-bottom: 2px solid #e0e0e0;">Created At</th>
        <th style="padding: 12px 16px; border-bottom: 2px solid #e0e0e0;">Items</th>
      </tr>
    </thead>

    <tbody>
      <% @orders.each do |order| %>
        <tr style="border-bottom: 1px solid #eee; font-size: 0.95rem; transition: background 0.2s ease;"
            onmouseover="this.style.backgroundColor='#f9f9f9';" onmouseout="this.style.backgroundColor='white';">
          
          <td style="padding: 12px 16px;"><%= order.id %></td>
          <td style="padding: 12px 16px; color: #333;"><%= order.user.email %></td>

          <td style="padding: 12px 16px; font-weight: 600; color: #2c5282;">
            $<%= order.order_items.sum { |item| item.product.price * item.quantity } %>
          </td>

          <!-- âœ… STATUS DROPDOWN -->
          <td style="padding: 12px 16px;">
            <%= form_with model: [:admin, order], url: admin_order_path(order), method: :patch, local: true do |f| %>
              <%= f.select :status, Order::STATUSES, {}, 
                    { onchange: "this.form.submit()", 
                      style: "padding:6px 10px; border-radius:6px; border:1px solid #ccc; background:#f8f9fa; font-size:0.9rem; cursor:pointer;" } %>
            <% end %>
          </td>

          <td style="padding: 12px 16px; color: #555;"><%= order.created_at.strftime("%Y-%m-%d") %></td>

          <td style="padding: 12px 16px;">
            <ul style="margin: 0; padding: 0; list-style: none;">
              <% order.order_items.each do |item| %>
                <li style="margin-bottom: 4px; color: #444;">
                  <strong><%= item.product.name %></strong> Ã— <%= item.quantity %>
                </li>
              <% end %>
            </ul>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>
